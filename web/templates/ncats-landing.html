<!DOCTYPE HTML>
<html class="bg-light" lang="en-US" >
	<head>
		<title>NCATS Pending APIs</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="HandheldFriendly" content="True" />
		<meta property="og:locale" content="en_US" />
		<!-- Unique for each site -->
		<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="generator" content="Drupal 7 (http://drupal.org)" />
		<link rel="canonical" href="https://ncats.nih.gov/" />
		<link rel="shortlink" href="https://ncats.nih.gov/" />
		<meta property="og:site_name" content="National Center for Advancing Translational Sciences" />
		<meta property="og:type" content="website" />
		<meta property="og:url" content="https://ncats.nih.gov/" />
		<meta property="og:title" content="National Center for Advancing Translational Sciences" />
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:url" content="https://ncats.nih.gov/" />
		<meta name="twitter:title" content="National Center for Advancing Translational Sciences" />
		<!-- Styles -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
		<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
		<script async defer src="https://buttons.github.io/buttons.js"></script>
	</head>
  <nav class="navbar navbar-expand-lg navbar-dark" style="background:black;">
    <a class="navbar-brand" href="#"><img height="50px" alt='Translator' src="static/img/tr.jpg"/></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="#pending">Translator KP APIs</span></a>
        </li>
      </ul>
    </div>
  </nav>
	<body class="bg-light">
    <div id="ncats" class="container">
      <section  class="jumbotron bg-light d-flex justify-content-center align-items-center" style="min-height:100vh;">
        <div class="text-center">
					<svg width="100" height="100">
						<rect x="30" y="30" width="50" height="50" style="stroke:grey;stroke-width:2;fill:none;"/>
						<rect x="20" y="20" width="50" height="50" style="stroke:black;stroke-width:2;fill:none;"/>
	        </svg>
          <h2 class="mt-5 mb-0">
						<b>Knowledge Provider (KP) APIs</b>
					</h2>
					<h2 class="m-0">
						made for
					</h2>
					<h4 class="mb-5">
						<b><a href="https://ncats.nih.gov/translator" target="_blank" rel="noreferrer">NCATS Biomedical Data Translator</a> Program</b>
					</h4>
          <p class="">
  					The list of APIs here provide programatic access to the underlying knowledge sources they cover. They were built using
  					<a rel="noopener"  class="link" href="https://biothingsapi.readthedocs.io/en/latest/" target="_blank">BioThings SDK</a> and follow the same design pattern of our official BioThings APIs (<a rel="noopener"  class="link" href="https://mygene.info" target="_blank">MyGene.info</a>,
  					<a rel="noopener" class="link" href="https://myvariant.info" target="_blank">MyVariant.info</a>, <a rel="noopener"  class="link" href="https://mychem.info" target="_blank">MyChem.info</a>, etc). These APIs are serving as the Knowledge Providers (KPs) in the <a href="https://ncats.nih.gov/translator" target="_blank" rel="noreferrer">NCATS Biomedical Data Translator</a> project. They were deployed to the
						NCATS Cloud infrastructure for production use.
  				</p>
					<p class="">
						We are continuing expanding the list of KP APIs here as new knowledge sources are identified. You are always welcome to <a href="https://github.com/NCATS-Tangerine/translator-api-registry/issues/new?assignees=cmungall%2C+tomconlin%2C+newgene%2C+kevinxin90&labels=data+wanted&template=a_data_source_wanted.md" target="_blank" rel="noreferrer">suggest a great resource</a> to us as well.
					</p>
          <div class="text-center p-5 mt-5">
            <a href="#pending" class="text-theme-dark">
              <h3>Try Them</h3>
              <h2><i class="fas fa-chevron-down"></i></h2>
            </a>
          </div>
        </div>
      </section>
      <section class="jumbotron fullscreen text-center" id="pending">
        <h2>(<span v-text="list.length"></span>) Knowledge Provider APIs</h2>
				<div style="overflow-x:scroll">
					<table class="table table-light table-striped table-sm table-hover sortable">
						<thead class="thead-dark">
							<tr>
								<th scope="col">Name</th>
								<th scope="col" class=" d-none d-md-table-cell">Documents</th>
								<th scope="col" class=" d-none d-md-table-cell">Entity Type</th>
								<th scope="col">Try It</th>
							</tr>
						</thead>
						<tbody>
							<template v-for="(api,index) in list"  v-if="index < shown">
								<api-box :api="api" :key="index"></api-box>
							</template>
						</tbody>
					</table>
				</div>
				<div class="mb-5 w-100 p-3 bg-secondary" v-if="shown < list.length">
					<button class="btn btn-outline-dark text-theme-light" @click="shown = shown+10">Load More</button>
				</div>

        <div class="text-center mt-5">
          <h3 class="d-block">Do you have an idea for a great knowledge source? Let us know!</h3>
          <a role="button" class="btn btn-dark m-4" target="_blank" href="https://github.com/NCATS-Tangerine/translator-api-registry/issues/new?assignees=cmungall%2C+tomconlin%2C+newgene%2C+kevinxin90&labels=data+wanted&template=a_data_source_wanted.md">Suggest A Knowledge Source <i class="fas fa-chevron-right"></i></a>
        </div>
      </section>
      <section  class="jumbotron bg-light">
        <footer id="footer">
          <div class="copyright text-center">
            <a rel="noopener"  class="d-inline mr-2" href="http://twitter.com/biothingsapi" target="_blank">
              </i> Twitter
            </a>
            <a rel="noopener"  class="d-inline mr-2" href="https://github.com/biothings/biothings.api" target="_blank">
              </i> Github
            </a>
            <hr />
            <small>
              All content copyright <a href="http://biothings.io" class="link">BioThings.io</a> Â© <span id="year"></span> <br /> All rights reserved.
              <a rel="noopener"  target="_blank" href="http://biothings.io/terms" class="link">Terms of use.</a>
              <a rel="noopener"  target="_blank" href="http://biothings.io/citation/" class="link">How To Cite</a>
            </small>
          </div>
        </footer>
      </section>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.4.2/vue.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>
      AOS.init();

			Vue.component('api-box', {
		  data: function(){
		    return{
					loading:false,
					metadata:null,
					existingEntity:false,
		    }
		  },
		  props: ['api'],
		  methods:{
				getMetadata(name){
					let self = this;
					let safeList = ['gene','chemical','variant','disease']
					self.loading = true;
					axios.get('//pending.biothings.io/'+name+'/metadata').then(res=>{
						self.loading = false;
						self.metadata = res.data
						if (self.metadata.hasOwnProperty('doc_type')) {
							if (safeList.includes(self.metadata['doc_type'])) {
								self.existingEntity = true
							}
						}
						else if (self.metadata.hasOwnProperty('biothing_type')) {
							if (safeList.includes(self.metadata['biothing_type'])) {
								self.existingEntity = true
							}
						}
					}).catch(err=>{
						self.loading = false;
						throw err;
					})
				},
				numberWithCommas() {
					let self = this;
					let x = null
					if (self.metadata.hasOwnProperty('src')) {
						for (var key in self.metadata.src) {
							if (self.metadata.src[key].hasOwnProperty('stats')) {
								for (var k in self.metadata.src[key]['stats']) {
									x += self.metadata.src[key]['stats'][k]
								}
							}
						}
						if (x) {
							return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
						}else{
							return 'N/A'
						}

					}
				},
				numberWithNOCommas() {
					let self = this;
					let x = null
					if (self.metadata.hasOwnProperty('src')) {
						for (var key in self.metadata.src) {
							if (self.metadata.src[key].hasOwnProperty('stats')) {
								for (var k in self.metadata.src[key]['stats']) {
									x += self.metadata.src[key]['stats'][k]
								}
							}
						}
						if (x) {
							return x
						}else{
							return 'N/A'
						}

					}
				},
				getFirstKeyName(obj){
					return Object.keys(obj)[0]
				},
		  },
		  watch:{
		  },
		  mounted: function(){
				let self = this;
				if (self.api["_id"]) {
					self.getMetadata(self.api["_id"])
				}
		  },
		  template: `<tr>
									<td class="text-left">
										<template v-if='api && api["status"]'>
											<i class="fas " :title='api["status"]' v-bind:class="[api['status'] === 'running' ? 'text-success fa-check-circle' : 'text-danger fa-exclamation-circle' ]"></i>
										</template>
										<span class="font-weight-bold apiTitle d-inline" v-text='api["_id"]'></span>
										<div v-if='loading' class="d-inline text-warning">
											Loading ... <i class="fas fa-spinner fa-pulse"></i>
										</div>
									</td>
									<td class="bg-light d-none d-md-table-cell">
										<template v-if="metadata && metadata.src">
											<small class="badge bg-light"  v-text="numberWithCommas()" ></small>
										</template>
									</td>
									<td class=" d-none d-md-table-cell">
										<template v-if="metadata">
											<div v-if="metadata.biothing_type" class="badge bg-light text-theme-dark d-block p-1">
												<span v-text="metadata.biothing_type"></span>
											</div>
											<div v-if="metadata.doc_type" class="badge bg-light text-theme-dark d-block p-1">
												<span v-text="metadata.doc_type"></span>
											</div>
										</template>
									</td>
									<td>
										<div>
											<a class="btn btn-outline-secondary" :href="'/'+api['_id']">Try It <i class="fas fa-chevron-right"></i></a>
										</div>
									</td>
								</tr>`
		});


      var app = new Vue({
        el: '#ncats',
        data: function(){
          return {
             pending:["denovodb","phewas","gwascatalog","biomuta","ccle","kaviar"],
             list:[],
						 shown:20
          }
        },
        methods: {
          getList(){
            let self = this;
            axios.get('https://biothings.ncats.io/api/list').then(res=>{
              if (res.data.result) {
                for (var i = 0; i < res.data.result.length; i++) {
                  switch (res.data.result[i]["_id"]) {
                    case 'fire':
                      break;
                    default:
                      self.list.push(res.data.result[i])
                  }
                }
              }
            }).catch(err=>{
              throw err;
            })
          },
          numberWithCommas(x) {
              return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
          },
        },
        mounted: function(){
					var self = this;
          // this.getList()
					// if (window.location.hostname == "localhost") {
					// 	self.list = [{"_id": "biomuta", "status": "running"}, {"_id": "ccle", "status": "running"}, {"_id": "cord_anatomy", "status": "running"}, {"_id": "cord_bp", "status": "running"}, {"_id": "cord_cc", "status": "running"}, {"_id": "cord_cell", "status": "running"}, {"_id": "cord_chemical", "status": "running"}, {"_id": "cord_disease", "status": "running"}, {"_id": "cord_gene", "status": "running"}, {"_id": "cord_genomic_entity", "status": "running"}, {"_id": "cord_ma", "status": "running"}, {"_id": "cord_protein", "status": "running"}, {"_id": "denovodb", "status": "running"}, {"_id": "DISEASES", "status": "running"}, {"_id": "ebigene2phenotype", "status": "running"}, {"_id": "geneset", "status": "running"}, {"_id": "gwascatalog", "status": "running"}, {"_id": "kaviar", "status": "running"}, {"_id": "mgigene2phenotype", "status": "running"}, {"_id": "mrcoc", "status": "running"}, {"_id": "pfocr", "status": "running"}, {"_id": "phewas", "status": "running"}, {"_id": "semmed", "status": "running"}, {"_id": "semmed_anatomy", "status": "running"}, {"_id": "semmedbp", "status": "running"}, {"_id": "semmedchemical", "status": "running"}, {"_id": "semmedgene", "status": "running"}, {"_id": "semmedphenotype", "status": "running"}, {"_id": "umlschem", "status": "running"}]
					// }
					if ({{Context}}) {
						self.context = {{Context}}
						self.list = self.context.List
					}

          var currentTime = new Date()
          var year = currentTime.getFullYear()
          var myelement = document.getElementById("year");
          myelement.innerHTML= year;



        }
      });

			$('a[href*="#"]')
				// Remove links that don't actually link to anything
				.not('[href="#"]')
				.not('[href="#0"]')
				.click(function(event) {
					// On-page links
					if (
						location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '')
						&&
						location.hostname == this.hostname
					) {
						// Figure out element to scroll to
						var target = $(this.hash);
						target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
						// Does a scroll target exist?
						if (target.length) {
							// Only prevent default if animation is actually gonna happen
							event.preventDefault();
							$('html, body').animate({
								scrollTop: target.offset().top
							}, 1000, function() {
								// Callback after animation
								// Must change focus!
								var $target = $(target);
								$target.focus();
								if ($target.is(":focus")) { // Checking if the target was focused
									return false;
								} else {
									$target.attr('tabindex','-1'); // Adding tabindex for elements not focusable
									$target.focus(); // Set focus again
								};
							});
						}
					}
				});

    </script>
	</body>
</html>
